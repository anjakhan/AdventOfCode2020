const image = [{id: 1657, tile: ['...#.####.', '.....#...#', '#.....#.#.', '.##.#.....', '#.........', '.........#', '##......#.', '..........', '........#.', '.#.#..##..']}, {id: 2749, tile: ['####.##..#', '.#.#...#.#', '#.#....#.#', '...#.....#', '.#...#..##', '..#..##..#', '......##.#', '.#.#.###.#', '#........#', '..#..##.#.']}, {id: 1697, tile: ['#..#...###', '#.#..#....', '.##.#..###', '...#..#.#.', '#...##..#.', '.......##.', '##....#...', '#...#....#', '...#.....#', '.#....#...']}, {id: 1619, tile: ['#.##.#.#.#', '#.###..#..', '##.......#', '#.#.#...##', '##.#.##...', '....##....', '#....#....', '.#....#.##', '........#.', '....#.....']}, {id: 3037, tile: ['...####.##', '#...#.....', '...##.....', '##.....#..', '#.#.#.....', '.#..##....', '..##..##.#', '..#...##..', '#.#..#..#.', '..#######.']}, {id: 1979, tile: ['.#...#####', '#.#.##..#.', '.#.....#..', '##....#...', '#.###.....', '.###..####', '.#..##.#..', '.##..#..##', '#...#..#.#', '##.##.#.#.']}, {id: 3067, tile: ['.#.##....#', '.#........', '#...#.##..', '#..#.###..', '#..#.#...#', '#.........', '##.....###', '........#.', '...#.....#', '#.##..#..#']}, {id: 2857, tile: ['.##..##.##', '.......#.#', '.###.#..#.', '###.......', '#..#.#..##', '..#..#..#.', '.#...#.#..', '#..###.###', '##...##.##', '.#..#.##..']}, {id: 1447, tile: ['.###..#...', '.#.#.#..#.', '#....##.#.', '..#.#....#', '.##..#...#', '#....#...#', '#..##....#', '#..#...#.#', '..##......', '#......#.#']}, {id: 3527, tile: ['#..#.....#', '...#....#.', '##..#..###', '#.##...##.', '####..#.##', '.....##..#', '#.........', '#.#..#...#', '..#####.#.', '#.##....#.']}, {id: 2617, tile: ['..#.##.###', '....#..#..', '....#.#..#', '#.......#.', '##....#...', '#.........', '.#...#...#', '..........', '..#...##.#', '###.#.#...']}, {id: 2699, tile: ['...#.##.##', '.#..#.#..#', '.....#...#', '.##...#..#', '##...#....', '..#.....#.', '###...#...', '..#.###..#', '.#.#..#..#', '.#.##.#.##']}, {id: 2663, tile: ['.....###.#', '.....#.##.', '#.##....##', '###...#..#', '.#......##', '#....#....', '#.#.#...#.', '....#..#..', '...#.#....', '#..##.#..#']}, {id: 2591, tile: ['####.###..', '....##...#', '..#.##....', '##..##.#.#', '....#.....', '###.......', '.#..#..#.#', '....#..#..', '##...#...#', '###.###.##']}, {id: 1997, tile: ['.##....#..', '..#..#.#..', '....#.##..', '..#...####', '#..###....', '#.....#...', '##.....#..', '##.##.####', '###..#.#.#', '######.##.']}, {id: 1039, tile: ['..#.#...#.', '.##.##..#.', '##..#..##.', '##..#....#', '#..#....#.', '...#.#..##', '........#.', '.#.......#', '##....#.##', '#..##..###']}, {id: 1307, tile: ['..#.###...', '.##.#.##.#', '..#..#.###', '.##.#...##', '#.........', '#.........', '..##.....#', '...#.#....', '#...###...', '..#.##....']}, {id: 2297, tile: ['#.##..##..', '#..#..#..#', '##.##...##', '#..##.####', '###......#', '...#.##...', '...#....##', '#....#####', '#...#.#...', '#####..##.']}, {id: 2347, tile: ['..###.###.', '.#..#...##', '..#.#.....', '#...#....#', '###.....#.', '.#..#....#', '#...#..#.#', '..#...#.##', '#.#..#...#', '##...##.#.']}, {id: 2777, tile: ['#...#..#.#', '..#......#', '.#.....#..', '.........#', '....#....#', '###...##.#', '..##.#..#.', '#.####.#..', '#...##....', '...###..#.']}, {id: 1613, tile: ['.#..##.#..', '...##.#...', '#.#.#....#', '#....#...#', '..#..#.#.#', '....##.#.#', '##...#.#..', '........#.', '.....#.###', '#..#.#.#..']}, {id: 1289, tile: ['.##...#...', '#....#.#.#', '#..#...##.', '#..##.#.#.', '.#..####..', '.....##..#', '.....#...#', '.....#.##.', '#....#..##', '..##.#....']}, {id: 1087, tile: ['.#.#...#..', '##....#.##', '#..#..#..#', '..#..##.##', '##.##.#..#', '##........', '....##...#', '##.....#.#', '#....#..##', '#.....#.##']}, {id: 3659, tile: ['#######...', '...##....#', '.##.##..#.', '.....#...#', '##..#.#..#', '......#..#', '#....#....', '##..#..#.#', '.#...#....', '.#.##.####']}, {id: 2711, tile: ['...#....##', '#..#.##..#', '........#.', '#...#.##..', '##..#..#.#', '##.##.##.#', '#.#..#..##', '..####....', '#..#.#...#', '#...######']}, {id: 3851, tile: ['#.#.######', '.#.....##.', '......#...', '..#.......', '...#......', '..##....##', '##..######', '....#.#...', '........#.', '....#..#..']}, {id: 2917, tile: ['.##..#....', '#..#.....#', '......#..#', '#.##...###', '#..#.#...#', '###....#.#', '#.#.##..#.', '#.#....#.#', '##......##', '#.#.###.#.']}, {id: 1723, tile: ['.#####.#.#', '#....#...#', '#.........', '......#.##', '....##.#.#', '..##..###.', '###.#.#...', '..#.......', '##....#.#.', '.##....###']}, {id: 3023, tile: ['#..##.#...', '###...#.##', '.......##.', '#....#.###', '#........#', '.#.##...##', '#..#...#..', '#.#....#.#', '.#.#......', '##.##.###.']}, {id: 3389, tile: ['#.#..#....', '.#...#.###', '#.#....#..', '.#........', '...#..##..', '#.........', '##.....#.#', '#....#.#.#', '...#..##..', '.####.###.']}, {id: 2713, tile: ['#####.....', '#.####.#..', '..#.#.....', '.........#', '..........', '#..#.....#', '#........#', '#....#....', '..###.....', '#.#..##...']}, {id: 3109, tile: ['..#...#.##', '....#....#', '#..#.#.#.#', '....##..#.', '#..##....#', '....#.....', '...##.....', '#....##...', '#....#.#.#', '####.##...']}, {id: 1279, tile: ['.##.##..#.', '#....#....', '....###.##', '#.....##..', '##.#..#..#', '..#..##...', '#.#.#....#', '##....#...', '.#.##....#', '..#......#']}, {id: 1013, tile: ['##...##.##', '.###....#.', '#..###.#..', '...##.##.#', '..###.#.#.', '...##.....', '.##..###..', '.#.#......', '.#..#.###.', '.#...##..#']}, {id: 1889, tile: ['##..#.####', '...##.....', '.....#.#.#', '.......##.', '...##...##', '.....#.##.', '##.....#.#', '#..#...#.#', '.#..#.....', '..#.#..##.']}, {id: 1669, tile: ['#.#.######', '##..##..#.', '........##', '..##.#....', '.........#', '.....#.###', '..###.....', '#..#.#....', '.#..#.....', '###..#####']}, {id: 2689, tile: ['####.##...', '###.......', '.#.#.####.', '.#####....', '#..#....#.', '...#....##', '#..##.###.', '...#..#...', '.......#..', '.##.##.#.#']}, {id: 1487, tile: ['..##..#.#.', '#.###..##.', '#.###.....', '.#.#..##..', '#.....#...', '.....#....', '##.....##.', '...#....##', '...#.#.#.#', '.#.#.#....']}, {id: 2287, tile: ['##.#.##.#.', '...#.....#', '#.#.#.....', '#...#.#...', '##......##', '#...#.###.', '##.##.....', '#.##..#..#', '..####....', '.#.###.##.']}, {id: 3517, tile: ['#.####....', '.#..#...#.', '..#.......', '.#....##..', '..#..##.##', '....#..###', '...#......', '#.....#..#', '........##', '####.#.#.#']}, {id: 1559, tile: ['##.##.#..#', '#.#.....#.', '##.##.....', '#..#..#..#', '...#.###..', '#...##...#', '#.#.......', '#.....#...', '......##..', '.###.##...']}, {id: 2053, tile: ['#.#.#...#.', '##.#......', '..........', '##..#..#..', '#.#..#..##', '#....#..##', '##.#....##', '#..#....#.', '.#......##', '##..##.#..']}, {id: 2341, tile: ['##.####.#.', '.....#.##.', '#..#..####', '###...####', '..#....#..', '.#.#...#.#', '.........#', '#........#', '.#.#......', '..###...##']}, {id: 3191, tile: ['##..###.#.', '..#....#.#', '.......#..', '.###.#.#..', '.##..#...#', '#..#..#..#', '#..#....##', '..#..#....', '#.##......', '##.#.#....']}, {id: 3571, tile: ['###..#..##', '#..##...#.', '#..#.#..#.', '#..##...##', '.#...#...#', '......#.##', '##.......#', '.....#.#..', '###.......', '.#.##.###.']}, {id: 1621, tile: ['.#####....', '.##.......', '.....##...', '.....#....', '#...##....', '.#.##.#.#.', '##.....#.#', '#.....#...', '.....#..##', '##...####.']}, {id: 2903, tile: ['#..#.##..#', '#.#...####', '#....#..#.', '#.....#.#.', '#.........', '#...#..##.', '.#..#....#', '#.#.....##', '##...#.#.#', '..##.##...']}, {id: 3691, tile: ['#.##.##.##', '.#.#.#.#..', '#...#....#', '##......##', '#..#.#.#.#', '###....#..', '.........#', '.#..#.#..#', '#....#...#', '.##..###.#']}, {id: 1693, tile: ['.##....###', '......###.', '.#...#.#.#', '.#....##.#', '##...#.#..', '..#....###', '.#.#.##..#', '##.#.#.#.#', '#.#...#..#', '#...##..##']}, {id: 2677, tile: ['###.##..#.', '#.....###.', '##...#....', '..##..#.##', '.##....#..', '..#.#.###.', '.#...#..#.', '#....#..#.', '..####...#', '#.###.####']}, {id: 2131, tile: ['.#.#.#.###', '####...#..', '#....#....', '##..##...#', '#.#....#.#', '.#.......#', '.##....###', '...#..#..#', '.........#', '####.##.##']}, {id: 2377, tile: ['.#.#..####', '........##', '..#..##...', '...###...#', '....##.#..', '#..##..#..', '....#.....', '#.#......#', '#.#....#.#', '.###...#..']}, {id: 1019, tile: ['.#####.#.#', '..##..#..#', '####...#.#', '#....#.#..', '#..#..#...', '..##..##..', '#..#......', '#..#..#...', '..#....#..', '..#..#.##.']}, {id: 1831, tile: ['.....##...', '##.#.....#', '###.......', '.#.......#', '..#...##.#', '##.....##.', '...#....##', '......#.##', '#....###.#', '.#######.#']}, {id: 3163, tile: ['..###.....', '#.#.#.#..#', '........#.', '.#...#...#', '#..##.##.#', '........#.', '##....#...', '......#.##', '...#...###', '......#...']}, {id: 1051, tile: ['##..###.##', '..#..#.#.#', '#..#...###', '#....#.###', '#.#..##.##', '.....#.###', '........#.', '#..#......', '#..#..#..#', '..####..#.']}, {id: 2089, tile: ['..#####.#.', '.....#..##', '.###..#..#', '#...###..#', '#..#.#....', '....#.#..#', '##...#.##.', '..#...#..#', '#.#...#...', '##.##..#..']}, {id: 1489, tile: ['.#.##..##.', '#..#####.#', '#.#.#..#..', '#.......##', '#......#..', '.......#.#', '.##..#...#', '#.#......#', '..#.#.###.', '.#..#.###.']}, {id: 2969, tile: ['##.##.....', '#...##.###', '##.......#', '..#.......', '#........#', '##.##.##..', '.##.#.##.#', '.....#...#', '...#......', '#...#.#.#.']}, {id: 2801, tile: ['.##.#.#...', '####...##.', '..#.#..#..', '#..#.#..#.', '.##..#....', '.#.#.....#', '#...#...#.', '##.#....#.', '.....#..##', '#..##..##.']}, {id: 3719, tile: ['#.####....', '#........#', '#...#.....', '....#####.', '..##.#.#.#', '##........', '..#......#', '#.#..#....', '#.#......#', '.##..####.']}, {id: 3323, tile: ['#####...##', '....#.#...', '##..#..#..', '#....###..', '......##.#', '.#...##...', '#.#.......', '#...###.#.', '.####.##.#', '...######.']}, {id: 2143, tile: ['#......##.', '.##...#.#.', '.#....#...', '#.#.#.#.#.', '.##.......', '#.#..#....', '..##...#..', '#...#....#', '..#....#..', '..#.####..']}, {id: 1721, tile: ['...#.##..#', '#.#.......', '......#..#', '#..#.#..#.', '.....#....', '##.#....#.', '##.....#..', '#.#.###..#', '##......##', '....#.####']}, {id: 2371, tile: ['.#.#####..', '#.#....#.#', '#..#.#...#', '..#.#....#', '#####...#.', '##.#...###', '...###..#.', '##.......#', '...#....##', '##..#####.']}, {id: 3251, tile: ['..##.#....', '...##.#...', '#..###....', '#...##..#.', '#....#....', '.#...#..#.', '.......#..', '..#.##..#.', '#..##...#.', '..##.#...#']}, {id: 3001, tile: ['.#.......#', '#..###..#.', '#.##...##.', '..###.##.#', '..#.......', '..#.....#.', '##..##....', '...#....##', '#........#', '.#..#.#.##']}, {id: 1951, tile: ['#.#.#.#.#.', '#...#.#.#.', '..###..#.#', '...##.#..#', '..#...#...', '#.#......#', '.#.#..#..#', '..#..##.##', '#...#.#.##', '..#.##.##.']}, {id: 2129, tile: ['.#.#...#.#', '.#....#.#.', '#.####..#.', '#.##.##...', '.##..#.#.#', '..........', '#........#', '##....#...', '#...#.##..', '...##.#..#']}, {id: 1063, tile: ['########.#', '#....#....', '...#.#...#', '.........#', '#.......##', '.........#', '#..##.....', '...#......', '#..##..#.#', '.##....#.#']}, {id: 1787, tile: ['####...#..', '.........#', '....#.....', '..##..#..#', '.....###.#', '...#...#.#', '..#....#.#', '#..##...#.', '#.......#.', '.#.#...#..']}, {id: 3709, tile: ['##.#..####', '.#....#..#', '.......##.', '...#..##..', '#.#.......', '#.#..#.#..', '..##...#.#', '##..#...##', '##.....#.#', '.#..#.#...']}, {id: 2539, tile: ['#...##.###', '...##.#.#.', '......#.#.', '##..#.##..', '....##..#.', '#..#..#...', '#.##..#..#', '..#.#...#.', '#..##....#', '##.#.#..##']}, {id: 3373, tile: ['.##.#.##..', '..##.#.##.', '#.#.#..###', '.#..#....#', '#.##.##...', '#....##...', '.##..#....', '..#....#..', '#..#.##..#', '#....##.#.']}, {id: 2647, tile: ['#######.##', '#...#.#..#', '....###...', '......#.#.', '...###....', '##..#..#.#', '#......###', '#...##....', '.......#.#', '####....##']}, {id: 3593, tile: ['.#...###..', '..#....##.', '..#.##.#.#', '##.#..##.#', '##.....#.#', '..#.##...#', '..#.......', '.#.#.....#', '..#.#....#', '..###.#.#.']}, {id: 1303, tile: ['#...#..#..', '#.....###.', '...#....##', '....#.....', '#..#....#.', '.###.##.##', '##.#......', '.#.####.##', '...##...##', '##.#.#..##']}, {id: 3331, tile: ['.##.#.###.', '#...#.....', '.......#.#', '....#....#', '##.#.#...#', '........#.', '##.#.#.#.#', '#...#...##', '...##.##.#', '..#.###.#.']}, {id: 1373, tile: ['..#..##...', '..#..#.#..', '##..#...##', '#.....#...', '.........#', '#..#......', '#..#..##.#', '......#..#', '#.......##', '..#...#.##']}, {id: 1327, tile: ['#.###..###', '.#....#...', '##.......#', '#.#....##.', '#..#..#...', '.#...###..', '#.#...#..#', '##........', '.#...#...#', '.#..##.###']}, {id: 3217, tile: ['.##..#.#.#', '.#.....#.#', '#####...#.', '..##.#.##.', '#.#.....##', '...#..#...', '#..#.....#', '.#...#.#.#', '#...#.#...', '#..###.#..']}, {id: 1277, tile: ['...####.##', '.#..#..#.#', '..##..#.#.', '.#.#.#.#..', '...#..#...', '..#.##..#.', '.....#....', '.#......##', '.####.....', '##.#....##']}, {id: 1301, tile: ['.#.......#', '.#..#.#...', '#.....#..#', '#.#..###..', '#...#....#', '..##.#..#.', '#..##.....', '#...#..#.#', '.....#...#', '.#.#....#.']}, {id: 1811, tile: ['..#..#..#.', '###..#...#', '##...#...#', '.##.....##', '#.#.....#.', '.#......#.', '..###.....', '..#.##.##.', '.#......#.', '..#.....#.']}, {id: 3079, tile: ['.##..#.##.', '..........', '#..#.#....', '.##.......', '#.......#.', '.#.....#..', '###.#....#', '#.#...#...', '#....#..##', '#.####.##.']}, {id: 1229, tile: ['.#.####..#', '##.#...#..', '#..#..#..#', '#.#..###..', '##....#...', '#...##.#.#', '#..#.....#', '.#........', '#.#.....#.', '..#.#.#.#.']}, {id: 2719, tile: ['##.#..#...', '#......#..', '.........#', '#..##...#.', '#........#', '###.###...', '..##.#.#..', '......#...', '.#.#.#....', '...#...#..']}, {id: 3547, tile: ['.#....#.#.', '#.#.#....#', '.....#..##', '...#..#.##', '#.....##..', '#....##...', '.##......#', '#...#.....', '##.......#', '..#.#..###']}, {id: 1123, tile: ['##.##.....', '#.##.....#', '##...###..', '...#.##..#', '#........#', '##.##..###', '..##.#..#.', '##........', '#....#..#.', '.......#..']}, {id: 3361, tile: ['#..#.#....', '..#..#...#', '...##.....', '.#.#.#.##.', '#.#..#.##.', '..#.#..###', '#....#....', '......#...', '#....#...#', '.###.####.']}, {id: 1759, tile: ['...##..###', '###..#...#', '..........', '#...#....#', '#.###.#.#.', '##.#.#.#..', '#........#', '#.#..#...#', '#..#..#.##', '..##.##..#']}, {id: 1783, tile: ['.#.##.....', '.#....##..', '#..#..#.#.', '.....####.', '.....#####', '#...##..#.', '#.....#...', '#..#....##', '.#........', '###..#.##.']}, {id: 2551, tile: ['.##.#.#.##', '#.#.#.....', '#....#...#', '..#.......', '#.....#..#', '..##.#..##', '#..#....#.', '.#.#.#...#', '#..#..#...', '....##.#..']}, {id: 1553, tile: ['.###.....#', '...##..#.#', '....#..#..', '#.#..#..##', '.#...##.##', '..#..#....', '.##.#....#', '###.#.#..#', '##...#...#', '#..#..##.#']}, {id: 1609, tile: ['#.#..##.#.', '#.#...#..#', '#...####.#', '.##.......', '...#.....#', '#..#..#...', '...#...###', '#..#.#..#.', '......#.##', '#.#####...']}, {id: 1847, tile: ['...###.##.', '..##....##', '.##..#...#', '#..#..#...', '#...##....', '#..#.##..#', '#..#..#.##', '##.......#', '##.......#', '##.#....##']}, {id: 3433, tile: ['####..###.', '..#..#####', '##..##...#', '#.##.....#', '####......', '.##....#.#', '#..#.#..##', '...#.#..#.', '###.......', '.##..##..#']}, {id: 1471, tile: ['#.##.#....', '.#.#.....#', '#.##.....#', '.......#..', '........##', '#.#......#', '#.....#...', '..........', '#.##..##..', '...##.#.#.']}, {id: 2239, tile: ['##.#.#..#.', '##..#...#.', '..#.......', '..#.....#.', '#........#', '#.........', '#......#..', '##..#...##', '.#.#..####', '#.#..#.#.#']}, {id: 3137, tile: ['.####...#.', '.#..#..#.#', '.#...##..#', '.##..#...#', '#.........', '.#.##.#...', '..#..##.##', '.....#.###', '.##.#.....', '..#.#...#.']}, {id: 3911, tile: ['...###.##.', '##.......#', '#..#......', '.......#.#', '##........', '####.....#', '#.##.##.#.', '#....###.#', '#.##.##...', '..##.....#']}, {id: 2069, tile: ['.#....####', '##.#.#....', '#........#', '#.....#.#.', '#..#.....#', '...###....', '....##...#', '...##....#', '#.#.....##', '###..#.#.#']}, {id: 2389, tile: ['#.##.#.#.#', '.###.#..#.', '##..#.#...', '..#.......', '#......#.#', '##.#.....#', '##......##', '.###....##', '##.##.##.#', '#..#####.#']}, {id: 1129, tile: ['.###.##.##', '#.........', '#..##....#', '.....#...#', '......##.#', '##...#....', '.##..#....', '.#.......#', '#.#.####..', '##....#..#']}, {id: 3797, tile: ['#...##.#.#', '#.###...##', '#..#..####', '#...#..#.#', '#.....#.##', '...#####.#', '...###.#..', '..##.#..#.', '#.###....#', '#..#....##']}, {id: 1871, tile: ['.#....###.', '...##...#.', '#.....#..#', '##.###...#', '##.#..#...', '#.#.###.##', '.#.......#', '#.#....#..', '##..#.....', '...#......']}, {id: 1733, tile: ['##..#####.', '#.#.#..#.#', '##..##...#', '....#.#...', '..#..##...', '##.##.#..#', '#.##.....#', '...#...#..', '#..#..#...', '.#..#.#.#.']}, {id: 2851, tile: ['.##.####.#', '#......#.#', '........##', '...#.##...', '.###...###', '.....#....', '#...#.#...', '##.#......', '##.#..#.##', '####.#..#.']}, {id: 1823, tile: ['.##..#..#.', '#.#...#...', '###...#.#.', '#.##.#...#', '.#..#....#', '##.#...###', '....#....#', '....#.....', '#..#......', '......#.##']}, {id: 3299, tile: ['#####.#.#.', '#....##.#.', '.......##.', '.........#', '.##.#..#..', '#...##....', '#......#.#', '.#.....#..', '....#...##', '#.#.##.###']}, {id: 1907, tile: ['.....#...#', '#....#...#', '....##...#', '.....##.#.', '#.....##..', '..##..#..#', '#....#...#', '#..#......', '#...#.#..#', '###.##....']}, {id: 2039, tile: ['...###.###', '#...#....#', '#.#......#', '#.........', '#####.#.##', '.##..##...', '#.........', '#...#...#.', '##.##.#...', '###.#..#..']}, {id: 1597, tile: ['###.....#.', '.#....#..#', '.......#..', '###.#.#...', '##...#....', '#...#..#..', '#....##...', '##..#.##.#', '##..#.....', '##.#.#####']}, {id: 2753, tile: ['#####..#..', '......#...', '##..#...##', '.##.#.#.##', '##...#..##', '#...#.....', '.#....#..#', '..........', '#.#......#', '..#..#...#']}, {id: 3643, tile: ['........#.', '#....#....', '#......##.', '#...###...', '..#..#..#.', '.####...##', '...#...#..', '...#..#..#', '......##..', '##.#.#####']}, {id: 3019, tile: ['##.##.#...', '.#..#.#...', '#..#.....#', '......#..#', '#.......#.', '##.#.#...#', '..#..#....', '...#.#...#', '###.......', '.....#.###']}, {id: 1439, tile: ['.#..#...##', '#........#', '..........', '#.........', '##..##.###', '##......#.', '#.##.....#', '.##..#..##', '.##.#.##.#', '...###.###']}, {id: 1511, tile: ['..####.#..', '#.......##', '..#..#.#..', '..####....', '...##....#', '#.#.###..#', '.#..#....#', '##.....#.#', '.....#...#', '#..#####.#']}, {id: 2467, tile: ['.#.#######', '###..##...', '...#...#.#', '.........#', '...##.####', '.........#', '........##', '##.#..####', '.#...#####', '.#.##.###.']}, {id: 2767, tile: ['.#...#...#', '##...###..', '.#....####', '..#.#.#.#.', '#.....##..', '#......#.#', '..#......#', '##.#.....#', '.#.##..#..', '.#..####.#']}, {id: 2113, tile: ['..#..#####', '##.#.#####', '##...#...#', '##.#....##', '..#.##..#.', '##.######.', '#.........', '.#.##.#..#', '.#.#.##..#', '#.##...###']}, {id: 1193, tile: ['##..###.#.', '.#........', '#.........', '###......#', '...#...#..', '#.#.......', '#.........', '#..#.....#', '#....##...', '#.##..###.']}, {id: 2441, tile: ['#.#..#....', '..........', '.....#..##', '..#......#', '#...#....#', '#........#', '.#......##', '.#...##.#.', '...#.##...', '.####....#']}, {id: 1861, tile: ['.##..##.##', '#.......##', '#.....#...', '#.....#...', '##.......#', '.........#', '.#.....#.#', '#.#....#.#', '#....#.#.#', '...##....#']}, {id: 2791, tile: ['.##.###.#.', '##.......#', '#........#', '#..#.##..#', '.##...##.#', '......##..', '.##..##..#', '#......#..', '.......#..', '...#.###..']}, {id: 3329, tile: ['...#..#.#.', '#.#.#.....', '.#.#..#..#', '#.........', '#.#...#..#', '..#..#....', '#.....#...', '..#....##.', '...#.#....', '...##.#..#']}, {id: 3727, tile: ['####.#....', '#.#......#', '..#.......', '##...#.##.', '..#..##.#.', '..#...#..#', '...#.###.#', '###.....##', '..#.....##', '###.###..#']}, {id: 1171, tile: ['...###.#..', '#.#....#.#', '....#....#', '#....#....', '#..#.###..', '.#....###.', '.#.##.##..', '..###...##', '....#...#.', '.#######..']}, {id: 2953, tile: ['#..###.###', '.#.#...#.#', '.##.###...', '..#.#.....', '#........#', '..#....#.#', '.........#', '#.###.##..', '........#.', '###.##.#.#']}, {id: 3701, tile: ['..####....', '##...#..#.', '##...#.#..', '#......##.', '#......#..', '....#..##.', '.####...#.', '....#..##.', '#..##..#.#', '...#.##.#.']}, {id: 2671, tile: ['##..#.#...', '###......#', '.....#.###', '#.#......#', '...##.#...', '...#.#...#', '#.#.#..##.', '#......#.#', '#.##.#.##.', '..#..#.##.']}, {id: 1913, tile: ['###..###.#', '#.#..###..', '...##...#.', '.#.#.....#', '#.#...##.#', '##......#.', '#...#..#..', '..#.#....#', '...#...#.#', '##..##.#.#']}, {id: 2417, tile: ['.......###', '...#.#...#', '#.........', '..#..#...#', '.#....##..', '##....#..#', '#.....##..', '...#.#.##.', '#.##.#..#.', '##.##.#.#.']}, {id: 1523, tile: ['....#...#.', '#.........', '..##.##..#', '##.##..#.#', '......####', '..#......#', '##.......#', '##.#.#.#.#', '..#.#.#...', '#.##...###']}, {id: 2503, tile: ['######....', '.###...##.', '.##.#..##.', '...#....#.', '.....#.#.#', '#..#.#.#.#', '#..##..#..', '##........', '.#...###.#', '#.##....#.']}, {id: 3041, tile: ['.....###.#', '##..##....', '....##..##', '#.....#.##', '##..###.#.', '##.###...#', '#.####...#', '.#.#.##..#', '......#...', '####....##']}, {id: 3863, tile: ['#..##.#.#.', '....#....#', '....#.....', '#....#...#', '#...#.....', '..##...#..', '#.#..#...#', '##..#...#.', '##..#.#...', '#.#.#.....']}, {id: 2269, tile: ['#...###...', '.#.#.....#', '##..#...#.', '....#..##.', '###...#...', '##.......#', '.#....#..#', '..#.##.#..', '#........#', '#..##...##']}, {id: 3739, tile: ['####..###.', '#.#.##....', '...##...##', '.##.#....#', '#.#..#...#', '..##.###..', '..#..#.#.#', '....###...', '..###..#.#', '##.###.###']}, {id: 2243, tile: ['..##..#..#', '#......###', '###...##.#', '#.....#..#', '#......#..', '#....##...', '##.....##.', '.......#.#', '...##.##..', '.##.##.#..']}, {id: 3011, tile: ['.###......', '.#.##.##.#', '...#..#..#', '##...###..', '..........', '###.....##', '.#.....##.', '.#.#..##..', '..#..#....', '.##..#.#..']}, {id: 3209, tile: ['##.#.#.##.', '........#.', '.....#.#..', '###..##..#', '##.......#', '.##..##...', '.##.##.#.#', '..##...#..', '#.#.#..###', '...###....']}, {id: 1049, tile: ['##.#####.#', '#.#.##....', '.##.#.....', '#.........', '#....#..##', '##..#.#.#.', '.....#...#', '#.#.......', '.#.##....#', '#.##.##..#']}, {id: 3449, tile: ['..####....', '...#.#.##.', '.......#..', '#..##..###', '...#.#..#.', '#....#.#..', '##.#..#.#.', '###.....##', '#...#...##', '#.##.##..#']}];

// Part 1

const findCorners = (array) => {
	let borders = [];
	let matchIDs = [];
	let matches = [];
	
	array.forEach(image => {
		let len = image.tile.length-1;
		let top = image.tile[0];
		let bottom = image.tile[len];
		let left = image.tile.map(pixel => pixel[0]);
		let right = image.tile.map(pixel => pixel[len]);

		borders.push({id: image.id, tile: [top, bottom, left.join(''), right.join('')]});
	});

	borders.forEach(border => {
		for (i=0; i<borders.length; i++) {
			for (j=0; j<border.tile.length; j++) {
				if (borders[i].tile.includes(border.tile[j]) && borders[i].id !== border.id) {
					matchIDs.push(border.id);
					matches.push([border.id, border.tile[j], borders[i].id, borders[i].tile]);
				} else if (borders[i].tile.includes(border.tile[j].split('').reverse().join('')) && borders[i].id !== border.id) {
					matchIDs.push(border.id);
					matches.push([border.id, border.tile[j].split('').reverse().join(''), borders[i].id, borders[i].tile]);
				}
			}
		}
	});

	const borderCounts = matchIDs.reduce((acc, val) => {
		acc[val] ? acc[val]++ : acc[val] = 1;
		return acc;
	}, {});

	let corners = [];

	for (const prop in borderCounts) {
		if (borderCounts[prop] === 2) {
			corners.push(prop);
		}
	}
	console.log('Corners multiplied:', corners.reduce((acc, val) => acc*parseInt(val)));
	return [matches, corners];
};

findCorners(image);

// ------------------------------------------------------------------------------------------------------------------------------------------------------

// Part 2

const findImage = (array) => {
	let part1 = findCorners(array);
	let matches = part1[0];
	let corners = part1[1];
	let imageRow = [];
	let imageCol = [];

	for (i=0; i<matches.length; i++) {
		if (matches[i][0] === parseInt(corners[0])) {
			imageRow.push(matches[i]);
			break;
		}
	}

	loop(imageRow, array, matches, 0);

	for (const element of matches) {
		if (element[0] === imageRow[imageRow.length-1][2]) {
			imageRow.push(element);
			break;
		};
	};

	let rows = imageRow.map(row => row[0]);
	console.log(rows);

	for (i=0; i<imageRow.length; i++) {
		for (j=0; j<matches.length; j++) {
			if (imageRow[i][0] === matches[j][0] && !rows.includes(matches[j][2])) {
				imageCol.push([matches[j]]);
			}
		}

		loop(imageCol[i], array, matches, 0);

		for (const element of matches) {
			if (element[0] === imageCol[i][imageCol[i].length-1][2]) {
				imageCol[i].push(element);
				break;
			};
		};
	};

	let cols = imageCol.map(col => col.map(c => c[0]))
	console.log(cols);

	let puzzle = [];

	cols.forEach((item, index) => {
		let puz = [];
		item.forEach((id, x) => {
			for (i=0; i<array.length; i++) {
				if (array[i].id === id) {
					let split = array[i].tile.map(item => item.split(''));
					puz.push(split);
				}
			}
		})
		puzzle.push(puz);
	});

	puzzle.forEach((puz, index) => {
		for (i=0; i<puzzle.length-1; i++) {
			let len = puz[i].length-1;
			// let top = puz[i][0].join('');
			// let bottom = puz[i][len].join('');
			// let left = puz[i].map(pixel => pixel[0]).join('');
			let right = puz[i].map(pixel => pixel[len]).join('');

			let nextT = puz[i+1][0].join('');
			let nextB = puz[i+1][len].join('');
			let nextL = puz[i+1].map(pixel => pixel[0]).join('');
			let nextR = puz[i+1].map(pixel => pixel[len]).join('');
			//console.log(puz[i], puz[i+1]);
			//console.log(right, nextL, nextL.split('').reverse().join(''))

			if (right === nextL) {
				continue;
			}
			if (right === nextL.split('').reverse().join('')) {
				let newPuz = puz[i+1].reverse();
				puzzle[index].splice(i+1, 1, newPuz);
			}

			
		}
	});



	console.log(puzzle);

	// let createImage = [];

	// imageRow.forEach((item, index) => {
	// 	for (i=0; i<array.length; i++) {
	// 		if (item[0] === array[i].id) {
	// 			let arr = array[i].tile
	// 			let split = arr.map(item => item.split(''));
	// 			createImage.push(split);
	// 		}
	// 	}
	// });
	// console.log(createImage);

};

const loop = (imageRow, array, matches, i) => {
	while (imageRow.length < Math.sqrt(array.length)-1) {
		const tile = imageRow[i][1];
		const reverse = imageRow[i][1].split('').reverse().join('');
		const nextID = imageRow[i][2];
		const prevIndex = imageRow[i][3].indexOf(tile);
		const nextIndex = prevIndex === 0 || prevIndex === 2 ? prevIndex+1 : prevIndex-1;
		const nextTile = imageRow[i][3][nextIndex];

		for (const element of matches) {
			if (element[0] === nextID && element[3].includes(nextTile) || element[0] === nextID && element[3].includes(nextTile.split('').reverse().join(''))) {
				imageRow.push(element);
				break;
			};
		};

		i++;
	};
}

findImage(image);
